<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green House Gas Emission Management System</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <header class="main-header">
        <div class="header-content">
            <div class="logo-section">
                <h1>üåç GHG Emission Management System</h1>
                <p>Batangas State University-Lipa Campus</p>
            </div>
            <div class="header-actions">
                <button id="export-csv" class="btn-secondary">üì• Export CSV</button>
                <button id="export-json" class="btn-secondary">üì• Export JSON</button>
                <button id="clear-data" class="btn-danger">üóëÔ∏è Clear Data</button>
            </div>
        </div>
    </header>

    <main class="single-page-layout">
        <!-- Dashboard Section -->
        <section id="dashboard" class="main-section">
            <h2>üìä Executive Dashboard</h2>
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-label">Total Consumption (kg)</div>
                    <div class="kpi-value" id="total-emissions">--</div>
                    <div class="kpi-unit">kg</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">YoY Change</div>
                    <div class="kpi-value" id="yoy-change">--</div>
                    <div class="kpi-unit">%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Avg Annual Growth</div>
                    <div class="kpi-value" id="avg-growth">--</div>
                    <div class="kpi-unit">%</div>
                </div>
                <div class="kpi-card">
                    <div class="kpi-label">Data Points</div>
                    <div class="kpi-value" id="data-points">0</div>
                    <div class="kpi-unit">records</div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="chart-container">
                    <h3>Trend Analysis (kg)</h3>
                    <canvas id="dashboard-trend"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Consumption by Category</h3>
                    <canvas id="dashboard-industry"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Category Composition</h3>
                    <canvas id="dashboard-gas-pie"></canvas>
                </div>
            </div>

            <div class="chart-container" style="margin-top: 40px;">
                <h3>Period Comparison</h3>
                <table id="period-comparison-table" class="summary-table">
                    <thead>
                        <tr>
                            <th>Period</th>
                            <th>Total Consumption (kg)</th>
                            <th>YoY Change (%)</th>
                            <th>Growth Rate (%)</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </section>

        <!-- Data Input Section -->
        <section id="data-input" class="main-section">
            <h2>üì• Data Input & Management</h2>
            
            <div class="input-section">
                <div class="input-controls">
                    <h3>Quick Actions</h3>
                    <button id="load-sample" class="btn-primary">üìä Load Sample Data</button>
                </div>

                <div class="manual-input-section">
                    <h3>Manual Data Entry</h3>
                    <form id="manual-input" class="data-form">
                        <div class="form-row">
                            <div class="form-group">
                                <label for="year">Year:</label>
                                <input type="number" id="year" min="2000" max="2100" required>
                            </div>
                            <div class="form-group">
                                <label for="month">Month (Optional):</label>
                                <input type="number" id="month" min="1" max="12">
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="emission">Consumption (kg):</label>
                                <input type="number" id="emission" step="0.01" min="0" required>
                            </div>
                            <div class="form-group">
                                <label for="category">Category:</label>
                                <select id="category" required>
                                    <option value="">-- Select Category --</option>
                                    <option value="Water consumption">Water consumption</option>
                                    <option value="Treated water">Treated water</option>
                                    <option value="Solid waste segregated">Solid waste segregated</option>
                                    <option value="Solid waste unsegregated">Solid waste unsegregated</option>
                                    <option value="Food consumption">Food consumption</option>
                                    <option value="Flight emission">Flight emission</option>
                                    <option value="Accommodation emission">Accommodation emission</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="form-group">
                                <label for="source">Source/Location:</label>
                                <input type="text" id="source" placeholder="e.g., Main Campus, Cafeteria">
                            </div>
                        </div>
                        <button type="submit" class="btn-primary">‚úÖ Add Data Entry</button>
                    </form>
                    <div id="validation-message" class="validation-msg"></div>
                </div>
            </div>

            <div class="data-list-section">
                <h3>Data Entries (<span id="entry-count">0</span>)</h3>
                <div class="data-filters">
                    <input type="text" id="filter-category" placeholder="Filter by Category..." class="filter-input">
                    <input type="number" id="filter-year" placeholder="Filter by Year..." class="filter-input">
                    <button id="apply-filters" class="btn-secondary">üîç Apply Filters</button>
                </div>
                <ul id="data-list" class="data-list"></ul>
            </div>
        </section>

        <!-- Forecasting Section -->
        <section id="forecasting" class="main-section">
            <h2>üöÄ Forecasting (TFT-inspired with ML)</h2>
            
            <div class="forecast-controls">
                <div class="control-group">
                    <label for="forecast-years">Forecast Horizon (years):</label>
                    <select id="forecast-years">
                        <option value="3">3 Years</option>
                        <option value="5" selected>5 Years</option>
                        <option value="10">10 Years</option>
                    </select>
                </div>
                <div class="control-group">
                    <label for="forecast-model">Model Type:</label>
                    <select id="forecast-model">
                        <option value="lstm">LSTM (Advanced)</option>
                        <option value="arima" selected>ARIMA (Standard)</option>
                        <option value="linear">Linear Regression</option>
                    </select>
                </div>
                <button id="train-forecast" class="btn-primary"> Train & Forecast</button>
            </div>

            <div id="forecast-status" class="status-message"></div>

            <div class="forecast-results">
                <div class="chart-container">
                    <h3>Baseline Forecast</h3>
                    <canvas id="forecast-chart"></canvas>
                </div>
                <div class="chart-container">
                    <h3>Forecast Scenarios</h3>
                    <canvas id="scenario-chart"></canvas>
                </div>
            </div>

            <div class="forecast-details">
                <h3>Forecast Results & Confidence Intervals</h3>
                <table id="forecast-table" class="summary-table">
                    <thead>
                        <tr>
                            <th>Year</th>
                            <th>Baseline (kg)</th>
                            <th>95% Confidence Lower</th>
                            <th>95% Confidence Upper</th>
                            <th>Optimistic</th>
                            <th>Pessimistic</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>

            <div class="forecast-metrics">
                <h3>Model Metrics</h3>
                <div class="metrics-grid">
                    <div class="metric-card">
                        <div class="metric-label">R¬≤ Score</div>
                        <div class="metric-value" id="r2-score">--</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">RMSE</div>
                        <div class="metric-value" id="rmse">--</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">MAE</div>
                        <div class="metric-value" id="mae">--</div>
                    </div>
                    <div class="metric-card">
                        <div class="metric-label">Trend Direction</div>
                        <div class="metric-value" id="trend-direction">--</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="main-footer">
        <p>Green House Gas Emission Management System ‚Ä¢ MLOps-Compliant Analysis & Forecasting ‚Ä¢ Data-Driven Sustainability</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>
    <script src="https://cdn.jsdelivr.net/npm/simple-statistics"></script>
    <script src="data.js"></script>
    <script src="script.js"></script>
</body>
</html>
